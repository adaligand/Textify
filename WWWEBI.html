<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Table Generator</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f4f9; color: #333; padding: 40px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 1000px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        h2 { color: #5a6268; font-weight: 400; margin-bottom: 20px; }

        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #dee2e6; padding: 12px; text-align: left; vertical-align: top; }
        th { background: #f8f9fa; color: #666; font-size: 0.85rem; text-transform: uppercase; }
        
        /* Multi-select styling */
        .select-wrapper { position: relative; width: 100%; }
        .dropdown-content {
            display: none;
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            z-index: 10;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .select-wrapper:hover .dropdown-content { display: block; }
        .dropdown-item { padding: 8px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; }
        .dropdown-item:hover { background: #f1f1f1; }
        .dropdown-item input { margin-right: 10px; }

        .preview-area { background: #f8f9fa; border: 2px dashed #dee2e6; padding: 20px; border-radius: 5px; min-height: 100px; white-space: pre-line; margin-top: 20px; }
        
        .btn-row { display: flex; gap: 10px; margin-top: 15px; }
        button { flex: 1; padding: 12px; border-radius: 4px; border: none; font-weight: bold; cursor: pointer; }
        .copy-btn { background: #5a6268; color: white; }
        .clear-btn { background: #e2e2e2; }
    </style>
</head>
<body>

<div class="container">
    <h2>Student Feedback Table</h2>
    
    <table id="feedback-table">
        <thead>
            <tr>
                <th>Category</th>
                <th>WWW (Select Multiple)</th>
                <th>EBI (Select Multiple)</th>
            </tr>
        </thead>
        <tbody id="table-body">
            </tbody>
    </table>

    <div class="preview-area" id="output">Select phrases from the table...</div>
    
    <div class="btn-row">
        <button class="copy-btn" onclick="copyResult()">Copy Formatted Feedback</button>
        <button class="clear-btn" onclick="resetTable()">Clear Table</button>
    </div>
</div>

<script>
    const categories = ["Content", "Accuracy", "Vocab", "Op/reasons", "Tenses", "Complexity", "Fluency"];
    
    // Customize your phrases here
    const phrases = {
        "Content": { 
            www: ["You covered all the bullet points", "You developed most of your answers"], 
            ebi: ["Cover all points in more depth", "Focus on the specific task requirements"] 
        },
        "Accuracy": { 
            www: ["Your work is very accurate", "Grammar is consistent"], 
            ebi: ["Proofread for minor spelling errors", "Ensure verb endings match the subject"] 
        },
        "Vocab": { 
            www: ["Your vocab and ideas are varied", "Good use of high-level adjectives"], 
            ebi: ["Try to avoid repeating basic verbs", "Incorporate more topic-specific nouns"] 
        },
        "Op/reasons": { 
            www: ["You provided a good range of opinions", "Arguments are well-justified"], 
            ebi: ["Use more varied connective words", "Explain 'why' in more detail"] 
        },
        "Tenses": { 
            www: ["You used your tenses successfully", "Confident use of past and future"], 
            ebi: ["Be careful with irregular past participles", "Try to include a conditional tense"] 
        },
        "Complexity": { 
            www: ["Used a wider range of complex phrases", "Subordinate clauses used correctly"], 
            ebi: ["Incorporate more complex structures", "Vary sentence lengths"] 
        },
        "Fluency": { 
            www: ["Excellent flow between paragraphs", "Natural pace to your writing"], 
            ebi: ["Use more transitional phrases", "Work on logical sequencing"] 
        }
    };

    const tableBody = document.getElementById('table-body');

    function createRow(cat) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><strong>${cat}</strong></td>
            <td>${createDropdown(cat, 'www')}</td>
            <td>${createDropdown(cat, 'ebi')}</td>
        `;
        return tr;
    }

    function createDropdown(cat, type) {
        const list = phrases[cat][type];
        let itemsHtml = list.map(p => `
            <label class="dropdown-item">
                <input type="checkbox" class="fb-check" data-type="${type}" value="${type === 'www' ? '✓' : '⮕'} ${p}" onchange="updateOutput()"> ${p}
            </label>
        `).join('');

        return `
            <div class="select-wrapper">
                <div style="color: #999; font-size: 0.8rem;">Click to select...</div>
                <div class="dropdown-content">${itemsHtml}</div>
            </div>
        `;
    }

    function updateOutput() {
        const checks = document.querySelectorAll('.fb-check');
        let www = [];
        let ebi = [];

        checks.forEach(c => {
            if(c.checked) {
                if(c.dataset.type === 'www') www.push(c.value);
                else ebi.push(c.value);
            }
        });

        const output = document.getElementById('output');
        let text = "";
        if(www.length > 0) text += "WWW:\n" + www.join('\n') + "\n\n";
        if(ebi.length > 0) text += "EBI:\n" + ebi.join('\n');
        
        output.innerText = text || "Select phrases from the table...";
    }

    function copyResult() {
        const text = document.getElementById('output').innerText;
        navigator.clipboard.writeText(text);
        alert("Feedback copied!");
    }

    function resetTable() {
        document.querySelectorAll('.fb-check').forEach(c => c.checked = false);
        updateOutput();
    }

    // Initialize
    categories.forEach(cat => tableBody.appendChild(createRow(cat)));
</script>

</body>
</html>
